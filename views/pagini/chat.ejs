<!DOCTYPE html>
<html  lang="ro">
<head>
    <title>WanderWorld - Chat </title>
    <meta name="keywords" content="WanderWorld, chat, travel">
    <meta name="description" content="Wanderworld chat"><!-- descrierea paginii, adesea apare sub link când sunt afișate rezultatele căutării -->

    <%- include("../fragmente/head") %>
<!--    <script type="text/javascript" src="/resurse/js/flights.js"></script>-->
    <link rel="stylesheet" href="/resurse/css/chat.css" type="text/css" >

<!--    <script type="text/javascript" src="/node_modules/socket.io/client-dist/socket.io.js"></script>-->
<!--    <script>port=<%= port %></script>-->
    <script>
        // socketUrl = "../../";
        // if(document.location.href.indexOf("localhost") != -1) {
        //     socketUrl = "http://127.0.0.1:"+port;
        // }
        //const socket = io(socketUrl,{reconnect: true});
        // socket = io();
        // socket.on("mesaj_nou", function(nume, culoare, mesaj) {
        //
        //     var chat=document.getElementById("mesaje_chat");
        //     chat.innerHTML+=`<p> ${nume} : <span style='color:${culoare}'>${mesaj}</span></p> `;
        //
        //
        //     //ca sa scrolleze la final
        //     chat.scrollTop=chat.scrollHeight;
        // });

        function trimite(){
            var culoare=document.getElementById("culoare").value;
            var nume=document.getElementById("nume").value;
            var mesaj=document.getElementById("mesaj").value;
            fetch("/mesaj",  {

                method: "POST",
                headers:{'Content-Type': 'application/json'},

                mode: 'cors',
                cache: 'default',
                body: JSON.stringify({
                    culoare: culoare,
                    nume:nume,
                    mesaj:mesaj
                })
            })


        }

    </script>

</head>

<body>
<%- include("../fragmente/header") %>
<main>

    <div id="chat">
        <div id="mesaje_chat">
        </div>
        <label>
            Nume: <input type="text" id="nume" name="nume" value="ionel">
        </label><br/>
        <label>
            Mesaj: <textarea id="mesaj" name="mesaj" value="bau! "></textarea>
        </label><br/>
        <label>
            Culoare: <select id="culoare" name="culoare">
                <option value="red">red</option>
                <option value="green">green</option>
                <option value="blue">blue</option>
            </select>
        </label><br/>
        <button onclick="trimite()">ok</button>
    </div>
    <div contenteditable style="border:1px solid black;">Ceva</div>


</main>

<%- include('../fragmente/footer') %>

</body>
</html>